<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
    <title>Demo &raquo; Custom drag handle &raquo; gridster.js</title>
    <link rel="stylesheet" type="text/css" href="../Style/gridster.css" />
    <link rel="stylesheet" type="text/css" href="../Style/test.css" />
    <script type="text/javascript" src="../Scripts/jquery-2.1.4.js"></script>
    <script src="../Scripts/gridster.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="../Scripts/Chart.js"></script>
    <script type="text/javascript" src="../Scripts/jquery-ui-1.11.4.js"></script>
    <script type="text/javascript" src="../Scripts/snap_grid.js"></script>
</head>
<body>
    <style>
        
.deleteWidgetDiv {
    background: #999;
    float: right;
    font-size: 12px;
    padding: 4px 4px 0px ;
    cursor: pointer;
}

.gridster li header .dragDiv {
            background: #AAA;
            font-size: 12px;
            display: block;
            padding: 4px 0 0px ;
            cursor: move;
        }
    </style>
    <div>
            <p>Add new widget:</p>

            <button id="addLineWidgetButton">Add Line Chart widget</button>
            <button id="addBarWidgetButton">Add Bar Chart widget</button>
            <button id="addPieWidgetButton">Add Pie Chart widget</button>
            <br />
            <button class="js-seralize">Serialize</button>
            <br />
            <textarea id="log"></textarea>
    </div>
    <div class="gridster">
        <ul>
            <li data-row="4" data-col="4" data-sizex="2" data-sizey="2">
                <header>
                    <div class="deleteWidgetDiv">X</div>
                    <div class="dragDiv">Chart Widget</div>
                </header>
                <canvas id="canvas1"></canvas>

               
            </li>

        </ul>

    </div>
    <script>
        var count = 2;
        var gridster;

        $(function () {


            $(".gridster ul").gridster({
                widget_base_dimensions: [200, 200],
                widget_margins: [10, 10],
                helper: 'clone',
                avoid_overlapped_widgets: true,
                draggable: {
                    handle: '.dragDiv'
                },
                serialize_params: function ($w, wgd) {
                    return {
                        id: wgd.el[0].id,
                        col: wgd.col,
                        row: wgd.row,
                        x: wgd.size_x,
                        y: wgd.size_y,
                        htmlContent: $($w).html()
                    };
                }
            });

            gridster = $(".gridster ul").gridster().data('gridster');

            $(document).on("click", "#addLineWidgetButton", function (e) {
                e.preventDefault();
                var wid = document.createElement("li");
                var head = document.createElement("header");
                var deletewid = document.createElement("div");
                deletewid.classList.add("deleteWidgetDiv");
                deletewid.innerHTML = "X";
                var dragwid = document.createElement("div");
                dragwid.classList.add("dragDiv");
                dragwid.innerHTML = "Line Chart";
                var can = document.createElement("canvas");
                can.id = "canvas" + count;
                can.innerHTML = "Line_Graph deafult data";
                head.appendChild(deletewid);
                head.appendChild(dragwid);
                wid.appendChild(head);
                wid.appendChild(can);
                gridster.add_widget.apply(gridster, [wid, 3, 2]);
                var ctx2 = document.getElementById(can.id).getContext("2d");
                var myLines = new Chart(ctx2).Line(data);
                count++;
            });

            $(document).on("click", "#addBarWidgetButton", function (e) {
                e.preventDefault();
                var wid = document.createElement("li");
                var head = document.createElement("header");
                var deletewid = document.createElement("div");
                deletewid.classList.add("deleteWidgetDiv");
                deletewid.innerHTML = "X";
                var dragwid = document.createElement("div");
                dragwid.classList.add("dragDiv");
                dragwid.innerHTML = "Bar Chart";
                var can = document.createElement("canvas");
                can.id = "canvas" + count;
                can.innerHTML = "this is me no graph";
                head.appendChild(deletewid);
                head.appendChild(dragwid);
                wid.appendChild(head);
                wid.appendChild(can);
                gridster.add_widget.apply(gridster, [wid, 3, 2]);
                var ctx_bars = document.getElementById(can.id).getContext("2d");
                window.myBar = new Chart(ctx_bars).Bar(barChartData);
                count++;
            });

            $(document).on("click", "#addPieWidgetButton", function (e) {
                e.preventDefault();
                var wid = document.createElement("li");
                var head = document.createElement("header");
                var deletewid = document.createElement("div");
                deletewid.classList.add("deleteWidgetDiv");
                deletewid.innerHTML = "X";
                var dragwid = document.createElement("div");
                dragwid.classList.add("dragDiv");
                dragwid.innerHTML = "Pie Chart";
                var can = document.createElement("canvas");
                can.id = "canvas" + count;
                can.innerHTML = "this is me no graph";
                head.appendChild(deletewid);
                head.appendChild(dragwid);
                wid.appendChild(head);
                wid.appendChild(can);
                gridster.add_widget.apply(gridster, [wid, 2, 2]);
                var ctx_donuts = document.getElementById(can.id).getContext("2d");
                window.myDoughnut = new Chart(ctx_donuts).Doughnut(doughnutData);
                count++;
            });

            $(document).on("click", ".deleteWidgetDiv", function () {
                $(this).closest("li").addClass("activ");
                gridster.remove_widget($('.activ'));
            });

            $('.js-seralize').on('click', function () {
                var s = gridster.serialize();

                $('#log').val(JSON.stringify(s));
            })


        });
    </script>
</body>
</html>
