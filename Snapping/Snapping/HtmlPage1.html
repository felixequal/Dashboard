<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
    <title>Demo &raquo; Custom drag handle &raquo; gridster.js</title>
    <link rel="stylesheet" type="text/css" href="../Style/gridster.css" />
    <link rel="stylesheet" type="text/css" href="../Style/test.css" />
    <script type="text/javascript" src="../Scripts/jquery-2.1.4.js"></script>
    <script src="../Scripts/gridster.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="../Scripts/Chart.js"></script>
    <script type="text/javascript" src="../Scripts/jquery-ui-1.11.4.js"></script>
    <script type="text/javascript" src="../Scripts/snap_grid.js"></script>
</head>
<body>
    <style>
        
.deleteWidgetDiv {
    background: #999;
    float: right;
    font-size: 12px;
    padding: 4px 4px 0px ;
    cursor: pointer;
}

.gridster li header .dragDiv {
            background: #AAA;
            font-size: 12px;
            display: block;
            padding: 4px 0 0px ;
            cursor: move;
        }
    </style>
    <div>
        <form>
            <p>Add new widget:</p>

            <button id="addWidgetButton">Add widget</button>
        </form>
    </div>
    <div class="gridster">
        <ul>
            <li data-row="4" data-col="4" data-sizex="2" data-sizey="2">
                <header>
                    <div class="deleteWidgetDiv">X</div>
                    <div class="dragDiv">Chart Widget</div>
                </header>
                <canvas id="canvas1"></canvas>

               
            </li>

        </ul>

    </div>
    <script>
        var count = 2;
        var gridster;

        $(function () {

            gridster = $(".gridster ul").gridster({
                widget_base_dimensions: [200, 200],
                widget_margins: [10, 10],
                helper: 'clone',
                avoid_overlapped_widgets: true,
                draggable: {
                    handle: '.dragDiv'
                }
            }).data('gridster');

            $(document).on("click", "#addWidgetButton", function (e) {
                e.preventDefault();
                var wid = document.createElement("li");
                var head = document.createElement("header");
                var deletewid = document.createElement("div");
                deletewid.classList.add("deleteWidgetDiv");
                deletewid.innerHTML = "X";
                var dragwid = document.createElement("div");
                dragwid.classList.add("dragDiv");
                dragwid.innerHTML = "Line Chart";
                var can = document.createElement("canvas");
                can.id = "canvas" + count;
                can.innerHTML = "this is me no graph";
                head.appendChild(deletewid);
                head.appendChild(dragwid);
                wid.appendChild(head);
                wid.appendChild(can);
                gridster.add_widget.apply(gridster, [wid, 3, 2]);
                var ctx2 = document.getElementById(can.id).getContext("2d");
                var myLines = new Chart(ctx2).Line(data);
                count++;
            });

            $(document).on("click", ".deleteWidgetDiv", function () {
                $(this).closest("li").addClass("activ");
                gridster.remove_widget($('.activ'));
            });


        });
    </script>
</body>
</html>
